## starter kit
### I Concept
Сценарий: **Архитектор не с пустыми руками**  
Допустим, компания с нулевым (околонулевым) уровнем зрелости описания ИТ-архитектуры нанимает себе архитектора.  
Вариант 1. Если Архитектор с "пустыми руками", то первые полгода – год он будет заниматься методологией, выбором \ согласованием инструмента моделирования, а в оставшееся время вырабатывать архитектурные решения и их зарисовывать (где-то и как-то). Процесс закупки ЕА tool в крупных компаниях может составлять годы.   
Вариант 2. Целенаправленно на рынке отбирается ИТ-архитектор, который «под мышкой» сразу занесет методологию и бесплатный инструмент моделирования, что позволит «с колес» начать архитектурить.  
Хотелось бы обсудить и по возможности собрать такой «стартовый чемоданчик архитектора».   
#### В части методологии:  
- Соглашение о моделировании с облегченным archimate. Не весь же «тяжелый» archimate тащить в компанию с нулевым уровнем зрелости. Тем более наконец-то в OG задумались об его облегчении (упрощении), см. [ArchiMate NEXT Specification](https://github.com/bpmbpm/doc/blob/main/BPM/notation/ArchiMate/readme.md#archimate-next-specification)
- Не обязательно: упрощенный регламент взаимодействия ИТ, бизнес-заказчика (при наличии), проектного офиса (менеджера), финансового блока (согласование бюджета проекта \ изменения). Плюс общую концепцию слоев описания архитектуры (архитектурную пирамидку). 
#### В части инструментария:  
- поддержка облегченного archimate, формализованного в Соглашении о моделировании;
- наличие хоть какого-то архитектурно репозитария, хотя бы в представлении archi (coArchi) или в виде excel (например, штатная в MS связка visio-excel).
##### Варианты free EA tools:  
- FOSS: archi, [ADOxx](https://vienna.omilab.org/repo/files/WS2010/08_adoxx-as-metamodelling-platform_kuehn.pdf) \ [Team](https://austria.omilab.org/psm/content/team/download?view=download#) \ [ADOit](https://www.adoit-community.com/en/), Essential: https://enterprise-architecture.org/
- граф-редакторы в связке с репозитарием, например, visio-excel. Может быть есть подобный (excel или иные таблицы, ODBC и т.п.) плагин к drawio? Видел "большие" проекты на штатной связке visio-excel по описанию архитектуры компании "в одном флаконе": от схем интеграций (с описанием потоков бизнес-данных) до схем размещения оборудования в стойках, но не открытом доступе. Таrже есть проекты visio-excel с процессами компании, складского учета (с планами этажей группы зданий, причем ткнув в excel на табуретку - попадаем на планировку комнаты с этой табуреткой) и других репозитариев на excel с визуализацией в visio 
- community edition платных систем (PRO)  

Отдельно можно отметить:
- нечто устаревшее (иметь ввиду, и надеяться на "воскрешение проекта") https://marketplace.eclipse.org/content/archimate-papyrus
- Free online
  - https://online.visual-paradigm.com/ru/diagrams/features/archimate-tool/
  - https://creately.com/lp/archimate-tool/
  - https://plantuml.com/ru/archimate-diagram

Речь про ИТ-архитектуру \ ИТ-архитекторов – как противопоставление Корпоративной архитектуре \ корпоративным архитекторам (бизнес-архитекторам), которые ближе к «миру BPM», см. [презентации](https://github.com/bpmbpm/doc/tree/main/EA/presentation#bs).     

В идеале собрать бы такой «стартовый чемоданчик ИТ-архитектора» (starter kit), готовый для развертывания, на нескольких системах – инструментах (одну и ту же задачу показать на разных инструментах). Более точная формула: Соглашение о моделировании (легкий \ упрощенный вариант archimate) + свободный инструмент + готовая конфигурация этого инструмента под Соглашение.     
Или хотя бы обсудить каждый подход (преимущества \ недостатки). Как «прийти не с пустыми руками» (с набором методика + софт)?  
Например, может быть кто-то делал в archi преднастроенный шаблон, "упрощенного archimate" (с изменением правил валидации схемы).  
Ну или для начала, просто список контактов (компаний), кто вообще формализовал архитектуру на бесплатных инструментах (с репозитарием).  

Ниже идеи по реализации.
### II miniARIS (miniArchi) variants
Общая постановка: что-то простое и главное с абсолютным контролем по визуализации, формату хранения атрибутов объектов и т.п.
#### 1 Visio 
На базе Visio создают полноценные ARIS-подобные системы: [BPM-X](https://rus-visio-blog-archive.github.io/2013/10/07/728.htm) ([на osp](https://www.osp.ru/os/2013/08/13037855)), Бизнес-студия, [iServer](https://orbus.blob.core.windows.net/ecosystem/user-guides/russian/1%20iS2019%20%D0%A0%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%20%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F%20%D0%B4%D0%BB%D1%8F%20%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F%20iServer.pdf), [Enterprise explorer](https://enterprise-explorer.com/ru/#/home) и другие. Однако тут мы про miniBPM \ miniAris.

##### 1.1 Vanilla Visio 
Это просто папка с файликами visio (в одном файле архитектуру сложно разместить). Объекты (фигуры) в файлах кликабельные, поэтому может быть переход «куда угодно»: на внешние адреса (http, file), на другие файлы visio, вкладки, фигуры. Кликабельность у фигур по Ctrl+ЛКМ - немного сбивает с толку, но после выгрузки в pdf клик обычный - по ЛКМ. Кроме того, гиперссылка мульти адресная, но лучше эту возможность не использовать (нестандартная возможность).

Один стартовый файлик «Вся архитектура» - и от него по ссылкам переход через иерархию в нужный домен \ сегмент.   
Для перехода на внешний файл (в той же папке) в окне Гиперссылки (ПКМ на фигуре) указываем Адрес: Имя файла (можно AS.vsd?zoom=50) и Субадрес: Имя вкладки.  
Для перехода внутри файла достаточно указать в Субадрес вкладку или Вкладку/ИмяФигуры. Вместо пробелов ставим %20. В таблице свойств фигуры вместо «/» отображается «:». 
Чтобы задать имя фигуры заходим в Разработчик \ Имя фигуры. Если на схеме есть области нижняя (юг) или верхняя (север), то можно дать заголовок-как название фигуры к каждой из них и при переходе на фигуру, например, «юг» будет отображаться нужный сектор (фокус будет на фигуру, что прокрутит страницу вниз).  
Можно разместить это в сетевой папке с доступом всем «только чтение» (кроме рисовальщиков – архитекторов) – в этом случае у пользователя должен быть visio (visio запустится на его машине) или через подключение к удаленному рабочему столу (папка, где лежат файлы visio – «на чтение») – тогда visio на машине пользователя не обязателен. 
Visio содержит ведение метаданных к фигурам (ПКМ на фигуре: Данные \ Данные фигуры) и удобный инструмент визуализации этих данных: Меню: Расширенные рисунки, связанные с данными.  
Это возможности базового Visio.

##### 1.2 Publisher 
Можно на VBA или JS \ [API Visio JavaScript](https://bvisual.net/2017/02/09/visio-javascript-api-preview-announced/) создать подобие [web aris publisher](http://www.bpm.processoffice.ru/).  
В идеале через отдельный [viewer .vsdx](https://github.com/bpmbpm/doc/blob/main/BPM/graphic_editor/visio/README.md#visio-viewer) файлов. Однако такого в open source не нашел, а с visio конвертером от drawio не разобрался: [drawio vsdxImporter](https://github.com/jgraph/drawio/blob/dev/src/main/webapp/vsdxImporter.html) - он же [mxgraph-vsdx](https://github.com/ksholla20/mxgraph-vsdx).

MS сознательно не открывает visio viewer чтобы все использовали встроенный viewer в sharePoint и oneDrive. Жаль, но пока это ей удается. Вообще вопрос web публикации visio файлов - это ключевая проблема на пути реализации miniARIS на visio (точнее web publisher – как ключевого элемента miniARIS). Есть плагины типа [svgPublish](https://unmanagedvisio.com/products/svg-publish/), но они только для одного файла и собирать набор файлов (иерархический каталог схем, treeview) придется вручную.  

Варианты: 
- использовать не web-based publisher (просмотр через компонент visio); 
- в паблишере вместо vsd размещать svg (типа svgPublish); 
- в паблишере вместо vsd размещать pdf. Размещение pdf даже «более ближе» к пользователю.
 
##### 1.3 Repository
1.3.1 Использование в качестве репозитария Excel и штатной связки в MS office: visio – excel. Ручное связывание или автоматическое по названию. Как вариант: один Excel на множество visio-файлов. В штатной связке (вроде) только односторонняя синхронизация, но есть плагины с двухсторонней: [BackSync](https://unmanagedvisio.com/products/visio-back-sync/).  
1.3.2 Возможны более сложные варианты автоматической генерации репозитария в Excel из файлов Visio: парсится каждый файл Visio, определяется тип объекта (классифицируется в соответствии с типами корпоративного шаблона) и заносится в каталог (репозитарий) с фиксацией точного адреса: файл \ вкладка \ имя фигуры (или id). В репозитарий переносятся все свойства объектов. Для реализации подхода нужно при разработке схемы архитектуры (процесса) использовать единый шаблон \ трафарет (корпоративный шаблон, набор stencil). 
Фактически это внешний репозитарий на excel (можно на иных таблицах \ database), который может объединять не только объекты, полученные из visio, а и из других систем.  
1.3.3 Подробнее про вариант Внешний репозитарий объектов   
Иногда: как в одной системе (например, несколько групп архитекторов делают разные модели в archi автономно / полуавтономно), так и для сопряжения разных систем - используется общий репозитарий объектов.   
Ниже вариант, апробированный на visio. Сканируем каждый файл visio и заполняем excel: имя объекта, id, его тип, точный адрес файл \ вкладка \ имя фигуры и все остальное, что есть на схеме, включая параметры объекта \ данные объекта.   
Результат. В excel мы видим все объекты (реестр \ репозитарий). Выбираем нужный объект и видим в каких схемах он задействован, его свойства. Выбираем нужную схему и открывается соответствующий файл, соответствующая вкладка - лист (можно передать и фокус на объект).      
В случае разнородных систем общий репозитарий собирается на основе сканирования visio, drawio, yEd, archi и т.п. По расширению файла будет открываться соответствующий инструмент просмотра или редакторами. При изменении схемы – конечно повторное сканирование: запуск сканера с параметром «имя файла» (группы файлов, папки). Разновидность нотации в данном случае – второстепенная, т.к. важен тип объекта (задается шаблоном / набором stencil в visio, drawio и т.п.   
Итого. Visio + 6 страниц кода на создание \ актуализацию реестра excel (сканер) + 6 страниц кода на паблишер, типа aris publisher. Алгоритм сканера: взять файл из списка, пробежаться по каждому объекту листа и поместить все его атрибуты в созданную строку excel. Плюс строчка: свяжи объект visio с созданной строкой excel – чтобы сразу можно было пользоваться штатной связкой MS: excel – visio.   
Дополнительно можно анализировать и вносить в реестр связи объектов (отношения между фигурами, типы стрелок), это позволит кастомную верификацию схемы на соответсвии нотации, а не штатную в visio.   

##### 1.4 Notes
Мета модель мы фактически задаем Корпоративным шаблоном – в трафарете .vss как набор stencils. Проверка (чтобы пользователь не тащил на холст \ схему «все подряд») \ валидация – отдельная история, но прямо в Visio есть блок в меню Process \ Проверить схему и т.п. Название «Process» не должно смущать, правила валидации можно задавать и для не процессных нотаций. Вообще любой векторный редактор – он про типизированные объекты, т.е. мы знаем тип любой фигуры, нанесенной на схему (Process, Event, Actor). К каждой фигуре мы можем вести произвольный набор свойств (параметров), впрочем, как и в drawio, yEd, archi и т.п. А возможности у Visio в части визуализации – несравнимы не с чем «другим векторным».   
Уже этого достаточно, чтобы, используя штатную связку visio-excel получить систему с репозитарием и с нулевым объемом кода. Видел большие проекты формализации архитектуры на подобном, если кто видел подобное в открытом доступе - подскажите. Подобное делают и для визуализации любых активов (с репозитарием \ реестром в excel) на поэтажных планах: задача иная, но подход тот же: переходы с актива в реестре в excel на схему в visio и обратно – штатными средствами. Это все с нулевым кодингом, а прямо там же есть VBA, что позволяет любую обработку.  
Поговорка, что visio – это рисовалка, - для тех, кто не знает возможностей visio. Его конечно можно использовать как «рисовалка». Тот же АРИС часто используют как рисовалку, но не обзывают его так.

#### 2 Drawio
Проект [draw-vad](https://github.com/bpmbpm/draw-vad)

### III MiniArc notation
Подходы к созданию нотации miniArchiMate
#### 1 Принципы
1.1 Оставляем только часть объектов Archimate (четверть).  
1.2 Цветовую гамму в соответствии с нотациями VAD\ EPC (Scheer). Например, функция = операция = процесс – зеленым цветом. Роль = исполнитель – желтоватым. Цвет определяет только тип объекта (в дополнение к форме значка и эмблемы на нем). Конечно же не нужно раскрашивать в разные цвета один и тот же объект, например, процесс используемый в разных доменах (бизнес, прикладная, инфраструктура). Об этом наконецто додумались в OG, см. [спецификация Next:](https://habr.com/ru/posts/932602/)  
*элементы поведения на всех уровнях объединили в общие элементы "сервис", "процесс", "функция" и "событие";*   

1.3 Для выделения свойств проектного цикла выделяем (стиль линии внешнего контура фигуры):
- базовый стиль линии объекта 
- пунктир – новый объект (новая система)
- точки – утилизируемый объект
- пунктир с точкой – модернизируемый объект (остается, но модифицируется)  
Иногда «жизненный цикл» пытаются задать цветом заливки – но это плохо: цвет должен отображать только одну категорию свойства: или тип объекта или его «параметр истории».  
#### 2 Регламент и шаблон
2.1 Фиксируем метамодель схемой и таблицей и формализуем ее в Соглашении о моделировании «Нотация miniArc».     
2.2 Создаём корпоративный шаблон в соответствии с Соглашением о моделировании. Лучше сразу для ряда систем, например, пользовательские библиотеки visio (.vss) и drawio (.drawio, .xml).   
2.3 Подготавливаем несколько примеров схем в созданной нотации miniArc.   

##### Разное
- https://github.com/bpmbpm/doc/tree/main/Project/miniARIS
